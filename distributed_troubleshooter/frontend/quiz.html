<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expert Quiz</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">

  <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expert Quiz</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css">

  <style>
    body {
      background-color: #fdfdfd;
      font-family: 'Segoe UI', sans-serif;
    }

    h2 {
      color: #865fc5;
      font-weight: 600;
    }

    .card {
      border: none;
      border-radius: 12px;
      background-color: #f7f2fc;
      box-shadow: 0 4px 10px rgba(150, 130, 200, 0.12);
    }

    .form-check {
      margin-bottom: 8px;
      padding-left: 1.8em;
      position: relative;
    }

    .form-check input {
      position: absolute;
      left: 0;
      top: 0.2em;
    }

    .btn-success {
      background-color: #c69cf2;
      border-color: #c69cf2;
      color: white;
      transition: all 0.2s ease;
    }

    .btn-success:hover {
      background-color: #b185e9;
      border-color: #b185e9;
    }

    #quiz-message {
      font-weight: 500;
      color: #6a5acd;
    }

    .text-north { color: #6a5acd; }     .bg-north { background-color: #e6e6fa; }
    .text-south { color: #c26a6a; }     .bg-south { background-color: #ffe4e1; }
    .text-east  { color: #4caf8f; }     .bg-east  { background-color: #e0fff4; }
    .text-west  { color: #b8860b; }     .bg-west  { background-color: #fff8dc; }

    .issue-card {
      border-left: 6px solid #ccc;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      background-color: #ffffff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }

    .badge-status {
      padding: 0.4em 0.6em;
      border-radius: 1em;
      font-size: 0.75rem;
      font-weight: 500;
    }

    .badge-assigned { background-color: #c3e6cb; color: #155724; }
    .badge-pending  { background-color: #ffeeba; color: #856404; }
    .badge-closed   { background-color: #d6d8d9; color: #383d41; }
    .badge-rerouted { background-color: #d1ecf1; color: #0c5460; }
    .badge-rejected { background-color: #f8d7da; color: #721c24; }
  </style>

</head>
<body class="bg-light">
  <div class="container mt-5">
    <h2 class="text-center mb-4">Expert Verification Quiz</h2>

    <form id="quiz-form">
      <!-- Question 1 -->
      <div class="mb-4">
        <p><strong>1. What does SQL stand for?</strong></p>
        <div class="form-check"><input type="radio" name="q1" value="a"> Structured Query Language</div>
        <div class="form-check"><input type="radio" name="q1" value="b"> Sequential Query Listing</div>
        <div class="form-check"><input type="radio" name="q1" value="c"> Structured Question Language</div>
      </div>

      <!-- Question 2 -->
      <div class="mb-4">
        <p><strong>2. Which of the following is a Python web framework?</strong></p>
        <div class="form-check"><input type="radio" name="q2" value="a"> Angular</div>
        <div class="form-check"><input type="radio" name="q2" value="b"> Flask</div>
        <div class="form-check"><input type="radio" name="q2" value="c"> React</div>
      </div>

      <!-- Question 3 -->
      <div class="mb-4">
        <p><strong>3. What is the main purpose of cloud computing?</strong></p>
        <div class="form-check"><input type="radio" name="q3" value="a"> Faster gaming</div>
        <div class="form-check"><input type="radio" name="q3" value="b"> Hosting large-scale infrastructure remotely</div>
        <div class="form-check"><input type="radio" name="q3" value="c"> Local software installation</div>
      </div>

      <!-- Question 4 -->
      <div class="mb-4">
        <p><strong>4. Which one is a NoSQL database?</strong></p>
        <div class="form-check"><input type="radio" name="q4" value="a"> MySQL</div>
        <div class="form-check"><input type="radio" name="q4" value="b"> PostgreSQL</div>
        <div class="form-check"><input type="radio" name="q4" value="c"> MongoDB</div>
      </div>

      <!-- Question 5 -->
      <div class="mb-4">
        <p><strong>5. What keyword is used to define a function in Python?</strong></p>
        <div class="form-check"><input type="radio" name="q5" value="a"> def</div>
        <div class="form-check"><input type="radio" name="q5" value="b"> function</div>
        <div class="form-check"><input type="radio" name="q5" value="c"> define</div>
      </div>

      <button type="button" class="btn btn-success" onclick="submitQuiz()">Submit Quiz</button>
      <div id="quiz-message" class="mt-3 text-center"></div>
    </form>
  </div>

  <script>
    const BASE_URL = "http://localhost:8000";
    const token = localStorage.getItem("token");

    function submitQuiz() {
      const answers = {
        q1: "a",
        q2: "b",
        q3: "b",
        q4: "c",
        q5: "a"
      };

      let score = 0;
      for (let q in answers) {
        const selected = document.querySelector(`input[name="${q}"]:checked`);
        if (selected && selected.value === answers[q]) {
          score += 1;
        }
      }

      fetch(`${BASE_URL}/submit_quiz_score`, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${token}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ score: score })
      })
      .then(res => res.json())
      .then(data => {
        document.getElementById("quiz-message").innerText = data.message || `Submitted! You scored ${score}/5`;
        setTimeout(() => {
          window.location.href = "expert_dashboard.html";  // âœ… Redirect after submission
        }, 2000);
      })
      .catch(() => {
        document.getElementById("quiz-message").innerText = "Submission failed. Try again.";
      });
    }
  </script>


</body>
</html>
